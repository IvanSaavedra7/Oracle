package bd.daos;
import java.sql.SQLException;

import bd.BDSQLServer;
import bd.core.*;
import bd.dbos.UsuarioTeste;

public class UsuariosTestes {

	//VERIFICA O USUÁRIO
	public static boolean getUsuarioTeste(String idLoginPassado, String senhaPassada) throws Exception
	{
		MeuResultSet resultado = null;		
		try {
			
			String sql;
			
			sql = "ProcuraUsuario_sp " + 
			      "@login = "          + idLoginPassado +
			      "@senha = "          + senhaPassada;
			
			BDSQLServer.COMANDO.prepareStatement (sql);
			resultado = (MeuResultSet)BDSQLServer.COMANDO.executeQuery ();
		    
           
		}
		catch (SQLException erro)
        {
            throw new Exception(erro.getSQLState());
        }
		
		return resultado.first();
	}
	
	// VERIFICA A SENHA
	public static UsuarioTeste getSenhaUsuario(String senhaPassada) throws Exception
	{
		UsuarioTeste usuario = null;
		
		try {
			
			String sql;
			sql = "ProcuraSenha2_sp @senha = " + senhaPassada;
			BDSQLServer.COMANDO.prepareStatement (sql);
			MeuResultSet resultado = (MeuResultSet)BDSQLServer.COMANDO.executeQuery ();
		    
            if (!resultado.first())
                throw new Exception ("Não existe tal login");
            
            usuario = new UsuarioTeste (resultado.getString ("ID"),
                      resultado.getString("LOGIN"),
                      resultado.getString ("SENHA"));
            
		}
		catch (SQLException erro)
        {
            throw new Exception(erro.getSQLState());
        }
		
		return usuario;
	}
	
	
	
 	
}
